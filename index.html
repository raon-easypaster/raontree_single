<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¼ì˜¨íŠ¸ë¦¬ - Single Origin Menu</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- í°íŠ¸: ê³ ìš´ ë‹ì›€ -->
    <link href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&display=swap" rel="stylesheet">
    
    <!-- ì•„ì´ì½˜ (Lucide) -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        body {
            font-family: 'Gowun Dodum', sans-serif;
            background-color: #fdfbf7;
            color: #44403c;
            -webkit-tap-highlight-color: transparent;
        }
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .sold-out {
            opacity: 0.5;
            position: relative;
            filter: grayscale(100%);
        }
        /* ê´€ë¦¬ì ëª¨ë“œê°€ ì•„ë‹ ë•Œë§Œ í´ë¦­ ë°©ì§€ */
        body:not(.admin-mode) .sold-out {
            pointer-events: none;
        }
        .sold-out::after {
            content: 'SOLD OUT';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-10deg);
            background-color: #ef4444;
            color: white;
            padding: 0.5rem 1rem;
            font-weight: bold;
            font-size: 1.2rem;
            border-radius: 0.5rem;
            border: 2px solid white;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            z-index: 10;
        }
    </style>
</head>
<body class="min-h-screen relative pb-24">

    <!-- Header -->
    <header class="sticky top-0 z-50 bg-[#fdfbf7]/95 backdrop-blur-sm border-b border-stone-200 shadow-sm transition-all duration-300">
        <div class="max-w-3xl mx-auto px-6 py-4 flex justify-between items-center">
            <div onclick="window.scrollTo({top: 0, behavior: 'smooth'})" class="cursor-pointer">
                <h1 class="text-2xl font-bold text-stone-800 tracking-tight">Raon Tree</h1>
                <p class="text-xs text-stone-500">Specialty Single Origin</p>
            </div>
            <div class="flex items-center space-x-2">
                <button onclick="toggleAdminMode()" id="admin-btn" class="flex items-center px-3 py-1.5 rounded-full hover:bg-stone-100 transition text-stone-400 border border-transparent">
                    <i data-lucide="lock" class="w-4 h-4"></i>
                    <span class="ml-1 text-xs">ê´€ë¦¬</span>
                </button>
            </div>
        </div>
        
        <!-- Category Filter -->
        <nav class="max-w-3xl mx-auto px-4 pb-2">
            <div class="flex space-x-2 overflow-x-auto hide-scrollbar py-2">
                <button onclick="filterMenu('all')" class="filter-btn active px-4 py-2 rounded-full text-sm font-bold bg-stone-800 text-white whitespace-nowrap transition-all shadow-md">
                    ì „ì²´ë³´ê¸°
                </button>
                <button onclick="filterMenu('special')" class="filter-btn px-4 py-2 rounded-full text-sm font-bold bg-white text-stone-600 border border-stone-200 whitespace-nowrap hover:bg-stone-100 transition-all">
                    âœ¨ ìŠ¤í˜ì…œ/ê²Œìƒ¤
                </button>
                <button onclick="filterMenu('daily')" class="filter-btn px-4 py-2 rounded-full text-sm font-bold bg-white text-stone-600 border border-stone-200 whitespace-nowrap hover:bg-stone-100 transition-all">
                    â˜• ë°ì¼ë¦¬
                </button>
                <button onclick="filterMenu('decaf')" class="filter-btn px-4 py-2 rounded-full text-sm font-bold bg-white text-stone-600 border border-stone-200 whitespace-nowrap hover:bg-stone-100 transition-all">
                    ğŸŒ¿ ë””ì¹´í˜ì¸
                </button>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="max-w-3xl mx-auto px-4 py-6">
        
        <!-- Admin Notice -->
        <div id="admin-notice" class="hidden mb-4 bg-stone-800 text-white px-4 py-3 rounded-lg text-sm flex justify-between items-center shadow-lg">
            <span class="flex items-center"><i data-lucide="settings" class="w-4 h-4 mr-2"></i> ê´€ë¦¬ì ëª¨ë“œ: ê° ë©”ë‰´ì˜ [í’ˆì ˆ] ë²„íŠ¼ì„ ëˆŒëŸ¬ ìƒíƒœë¥¼ ë³€ê²½í•˜ì„¸ìš”.</span>
            <button onclick="toggleAdminMode()" class="text-xs bg-white text-stone-800 px-2 py-1 rounded font-bold">ì¢…ë£Œ</button>
        </div>

        <div id="menu-grid" class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <!-- JS Generated Content -->
        </div>

        <!-- Price Guide -->
        <div class="mt-8 bg-stone-100 rounded-xl p-6 text-sm text-stone-600 leading-relaxed shadow-inner">
            <h3 class="font-bold text-stone-800 mb-2 text-base flex items-center">
                <i data-lucide="info" class="w-4 h-4 mr-2"></i> ì´ìš© ì•ˆë‚´
            </h3>
            <ul class="space-y-2 list-disc list-inside text-xs sm:text-sm">
                <li>ëª¨ë“  í•¸ë“œë“œë¦½ì€ <span class="font-bold text-stone-800">HOT / ICE ê°€ê²©ì´ ë™ì¼</span>í•©ë‹ˆë‹¤.</li>
                <li>ì›ë‘ êµ¬ë§¤ ì‹œ <span class="font-bold text-stone-800">500g (20%), 1kg (30%) í• ì¸</span> ì ìš©ë©ë‹ˆë‹¤.</li>
                <li>ì»¤í”¼ë¥¼ ê³ ë¥´ê¸° ì–´ë ¤ìš°ì‹œë©´ ë°”ë¦¬ìŠ¤íƒ€ì—ê²Œ í¸í•˜ê²Œ ë¬¸ì˜í•´ì£¼ì„¸ìš”.</li>
            </ul>
        </div>
    </main>

    <!-- Footer -->
    <footer class="text-center py-10 text-stone-400 text-xs">
        <p class="mb-2">Raon Tree Roastery</p>
        <p class="text-[10px] opacity-70">Single Origin Line-up</p>
    </footer>

    <script>
        // --- ë°ì´í„° ì •ì˜ ---
        const menuData = [
            // 1. BLEND (Top Priority)
            {
                id: 'blend_purple', category: 'daily', country: 'Blend',
                name: 'ë¼ì˜¨íŠ¸ë¦¬ ë¸”ëœë“œ í¼í”Œ', 
                note: 'ê³¼í…Œë§ë¼, ì—í‹°ì˜¤í”¼ì•„, ì½œë¡¬ë¹„ì•„, ë¸Œë¼ì§ˆ ë¸”ë Œë”©',
                priceDrip: 3300, priceBean: 5000, tags: ['House Blend']
            },

            // 2. DECAF (Second Priority)
            {
                id: 'decaf_sidamo', category: 'decaf', country: 'Ethiopia',
                name: 'ì—í‹°ì˜¤í”¼ì•„ ì‹œë‹¤ëª¨ ë””ì¹´í˜ì¸ N', 
                note: 'ë¯¼íŠ¸, ë³´ë¦¬, ë ˆëª¬ê·¸ë¼ìŠ¤, ì˜¤ë Œì§€, í¬ë„',
                priceDrip: 4300, priceBean: 12000, tags: ['Decaf']
            },
            {
                id: 'decaf_brazil', category: 'decaf', country: 'Brazil',
                name: 'ë¸Œë¼ì§ˆ NY2 ê²Œë¥´ë§Œ CO2 (Decaf)', 
                note: 'ì´ˆì½œë¦¿, ë¶€ë“œëŸ¬ì›€, ê· í˜•ê°',
                priceDrip: 4300, priceBean: 12000, tags: ['Decaf']
            },

            // 3. DARK / SAVORY (Moved here after Decaf)
            {
                id: 'colombia_popayan', category: 'daily', country: 'Colombia',
                name: 'ì½œë¡¬ë¹„ì•„ í¬íŒŒì–€ í´ë¼ì„ (Dark)', 
                note: 'ì¹´ë¼ë©œ, ì•„ëª¬ë“œ, ë°€í¬ì´ˆì½œë¦¿, ë¸Œë¼ìš´ ìŠˆê°€, ë¬µì§í•¨',
                priceDrip: 5000, priceBean: 10000, tags: ['Dark']
            },
            {
                id: 'guatemala_waykan', category: 'daily', country: 'Guatemala',
                name: 'ê³¼í…Œë§ë¼ ìš°ì—ìš°ì—ì¼€ë‚­ê³  ì™€ì´ì¹¸ (Dark)', 
                note: 'ë°”ë‹ë¼, ì´ˆì½”, ë‹¨ë§›, ë³µí•©ì , ì¢‹ì€ ê· í˜•ê°',
                priceDrip: 5000, priceBean: 10000, tags: ['Dark']
            },
            {
                id: 'costarica_shb', category: 'daily', country: 'Costa Rica',
                name: 'ì½”ìŠ¤íƒ€ë¦¬ì¹´ ì‚°í˜¸ì„¸ ë”°ë¼ì£¼ SHB (Dark)', 
                note: 'ë§Œë‹¤ë¦°, ë¹„ìŠ¤í‚·, ì‹œë¦¬ì–¼, ë³¶ì€ ì•„ëª¬ë“œ, ë©”ì´í”Œì‹œëŸ½',
                priceDrip: 5000, priceBean: 10000, tags: ['Dark']
            },

            // 4. SPECIAL / GESHA
            {
                id: 'panama_mascarada', category: 'special', country: 'Panama',
                name: 'íŒŒë‚˜ë§ˆ ë§ˆìŠ¤ì¹´ë¼ë‹¤ ë¼ í”Œë£¨', 
                note: 'ìŸˆìŠ¤ë¯¼, í° ê½ƒí–¥ê¸°, ì²­ì‚¬ê³¼, ë²„í„° ìŠ¤ì¹´ì¹˜',
                priceDrip: 10000, priceBean: 25000, tags: ['New', 'Special']
            },
            {
                id: 'panama_esmeralda', category: 'special', country: 'Panama',
                name: 'íŒŒë‚˜ë§ˆ ì—ìŠ¤ë©”ë„ë‹¤ ê²Œìƒ¤ W', 
                note: 'ìŸˆìŠ¤ë¯¼, ë² ë¥´ê°€ëª», ë ˆëª¬, ê¿€(ì¡°ì²­), ìš°ì•„í•¨',
                priceDrip: 12000, priceBean: 35000, tags: ['Best', 'Premium']
            },
            {
                id: 'colombia_melon', category: 'special', country: 'Colombia',
                name: 'ì½œë¡¬ë¹„ì•„ ì•ˆí‹°ì˜¤í‚¤ì•„ ì—˜ í‘¸íˆ¬ë¡œ ë©”ë¡  ë¬´ì‚°ì†Œ H', 
                note: 'ë©œë¡ , ìˆ˜ë°•ë°”, ë”¸ê¸° ì•„ì´ìŠ¤í¬ë¦¼, ì‚¬ê³¼ì¥¬ìŠ¤, ì¹˜ì¦ˆì¼€ì´í¬',
                priceDrip: 7000, priceBean: 15000, tags: ['Funky']
            },
            {
                id: 'colombia_gesha_n', category: 'special', country: 'Colombia',
                name: 'ì½œë¡¬ë¹„ì•„ ë¶€ì—ì‚¬ì½” ë‚˜ë¦¬ë…¸ ë¡œìŠ¤ ì•™í—¬ë ˆìŠ¤ ê²Œìƒ¤ N', 
                note: 'ë¼ë²¤ë”, í¬ë„, ë¸”ë™ë² ë¦¬, ë ˆëª¬ê·¸ë¼ìŠ¤, ì‚¬íƒ•ìˆ˜ìˆ˜',
                priceDrip: 8000, priceBean: 20000, tags: ['Gesha']
            },
            {
                id: 'colombia_pink_lactic', category: 'special', country: 'Colombia',
                name: 'ì½œë¡¬ë¹„ì•„ ì‚° ì•„ëŒí¬ ì—˜ ë””ë¹„ì†Œ í•‘í¬ë²„ë²ˆ ë½í‹± W', 
                note: 'ë”¸ê¸°, ì¹´ë¼ë©œ, ë¶‰ì€ ê³¼ì¼ë¥˜, ë¼ë²¤ë”, ì‚¬ê³¼, ê³ ì¶”ì”¨',
                priceDrip: 8000, priceBean: 20000, tags: ['Pink Bourbon']
            },
            {
                id: 'guatemala_gesha_anaerobic', category: 'special', country: 'Guatemala',
                name: 'ê³¼í…Œë§ë¼ ì•„ì¹´í…Œë‚­ê³  í•€ì¹´ ë¼ ì†”ë ˆë‹¤ë“œ ê²Œìƒ¤ ë¬´ì‚°ì†Œ W', 
                note: 'í¬ë„, ìŠ¤í†¤í”„ë£», í™ì°¨, ì¹´ë¼ë©œ, ììŠ¤ë¯¼',
                priceDrip: 8000, priceBean: 20000, tags: ['Gesha']
            },
            {
                id: 'guatemala_gesha_honey', category: 'special', country: 'Guatemala',
                name: 'ê³¼í…Œë§ë¼ ì•„ì¹´í…Œë‚­ê³  í•€ì¹´ ë¼ ì†”ë ˆë‹¤ë“œ ê²Œìƒ¤ H', 
                note: 'í‘ì„¤íƒ•, ë¼ì„, í™ì°¨, ë°”ë‹ë¼, ììŠ¤ë¯¼',
                priceDrip: 8000, priceBean: 20000, tags: ['Gesha']
            },
            {
                id: 'peru_gesha', category: 'special', country: 'Peru',
                name: 'í˜ë£¨ ë¼ íŒ”ë ˆìŠ¤í‹°ë‚˜ ê²Œìƒ¤ W', 
                note: 'ì‚´êµ¬, ë§Œë‹¤ë¦°, ì–¼ê·¸ë ˆì´, ê¹”ë”í•¨',
                priceDrip: 8000, priceBean: 20000, tags: ['Gesha']
            },

            // 5. REMAINING DAILY / OTHERS
            {
                id: 'ethiopia_guji_anaerobic', category: 'special', country: 'Ethiopia',
                name: 'ì—í‹°ì˜¤í”¼ì•„ ì˜¤ë¡œë¯¸ì•„ ì„œ êµ¬ì§€ ê²Œìƒ¤ ë¬´ì‚°ì†Œ W', 
                note: 'ê³„í”¼, ë ˆë“œë² ë¦¬, ë°±í¬ë„, ë¸”ë™ì»¤ëŸ°íŠ¸, ì ¤ë¦¬',
                priceDrip: 5500, priceBean: 12000, tags: ['Anaerobic']
            },
            {
                id: 'ethiopia_guji_natural', category: 'daily', country: 'Ethiopia',
                name: 'ì—í‹°ì˜¤í”¼ì•„ ì˜¤ë¡œë¯¸ì•„ ì„œ êµ¬ì§€ ê²Œìƒ¤ N', 
                note: 'ë³µìˆ­ì•„, ìëª½, ì í¬ë„, ì—˜ë”ë² ë¦¬ê½ƒ, ì‚°ë”¸ê¸°',
                priceDrip: 5500, priceBean: 12000, tags: ['Natural']
            },
            {
                id: 'ethiopia_limu', category: 'daily', country: 'Ethiopia',
                name: 'ì—í‹°ì˜¤í”¼ì•„ ë¦¬ë¬´ ë ˆì‚¬ë“œ ì•„ë°”ë¶ˆêµ¬ N', 
                note: 'ë³µìˆ­ì•„, ë¸”ë£¨ë² ë¦¬, í¬ëœë² ë¦¬, ì´ˆì½œë¦¿, ê¿€',
                priceDrip: 5500, priceBean: 12000, tags: ['Natural']
            },
            {
                id: 'ethiopia_halo', category: 'daily', country: 'Ethiopia',
                name: 'ì—í‹°ì˜¤í”¼ì•„ ì˜ˆê°€ì²´í”„ í• ë¡œ ë² ë¦¬í‹° W', 
                note: 'ì˜¤ë Œì§€, ì‚¬íƒ•ìˆ˜ìˆ˜, ë°”ë‹ë¼, ì‚´êµ¬, ë°ì€ ì‚°ë¯¸',
                priceDrip: 5500, priceBean: 13000, tags: ['Washed']
            },
            {
                id: 'ethiopia_shakiso', category: 'daily', country: 'Ethiopia',
                name: 'ì—í‹°ì˜¤í”¼ì•„ ì‹œë‹¤ëª¨ êµ¬ì§€ ì‚¬í‚¤ì†Œ íƒ€ë° N', 
                note: 'ì¹´ì¹´ì˜¤ë‹™ìŠ¤, ë² ë¦¬ë¥˜, ë©”ë¡ , ë¸Œë¼ìš´ìŠˆê°€, í™ì°¨',
                priceDrip: 5500, priceBean: 12000, tags: ['Natural']
            },
             {
                id: 'ethiopia_jimma', category: 'daily', country: 'Ethiopia',
                name: 'ì—í‹°ì˜¤í”¼ì•„ ì˜¤ë¡œë¯¸ì•„ ì§ë§ˆ ê²Œë¼ íˆ¬ë§ˆí…Œì†Œ W', 
                note: 'ì˜¤ë Œì§€, ìë‘, ìš°ë¡±ì°¨, ì‹œíŠ¸ëŸ¬ìŠ¤',
                priceDrip: 5500, priceBean: 12000, tags: ['Washed']
            },
            {
                id: 'ethiopia_bombee', category: 'daily', country: 'Ethiopia',
                name: 'ì—í‹°ì˜¤í”¼ì•„ ì‹œë‹¤ë§ˆ ë²¤ì‚¬ ë´„ë²  N', 
                note: 'í‘ì„¤íƒ•, ë¼ì„, í™ì°¨, ë°”ë‹ë¼, ììŠ¤ë¯¼',
                priceDrip: 5500, priceBean: 12000, tags: ['Natural']
            },
            {
                id: 'ethiopia_arbegona', category: 'daily', country: 'Ethiopia',
                name: 'ì—í‹°ì˜¤í”¼ì•„ ì‹œë‹¤ë§ˆ ì•„ë¥´ë² ê³ ë‚˜ N', 
                note: 'í¬ë„, ì•„ë¡œë‹ˆì•„, ë¸”ë£¨ë² ë¦¬, ì´ˆì½œë¦¿, ìºëŸ¬ë©œ',
                priceDrip: 5500, priceBean: 12000, tags: ['Natural']
            },
            {
                id: 'brazil_grape', category: 'daily', country: 'Brazil',
                name: 'ë¸Œë¼ì§ˆ ë¹ˆí•  ì²­í¬ë„ ì ¤ë¦¬', 
                note: 'í¬ë„ì£¼ìŠ¤, ê±´í¬ë„, ì²­í¬ë„, íŒ¨ì…˜í›„ë¥´ì¸ , ì´ì¤‘ë°œíš¨',
                priceDrip: 5500, priceBean: 13000, tags: ['Unique']
            },
            {
                id: 'brazil_coconut', category: 'daily', country: 'Brazil',
                name: 'ë¸Œë¼ì§ˆ ë¹ˆí•  ì½”ì½”ë„›', 
                note: 'ì½”ì½”ë„›, í—¤ì´ì¦ëŸ¿, ë°ì€ ì‚°ë¯¸, ì´ì¤‘ë°œíš¨',
                priceDrip: 5500, priceBean: 13000, tags: ['Unique']
            },
            {
                id: 'kenya_mugaga', category: 'daily', country: 'Kenya',
                name: 'ì¼€ëƒ ë¬´ê°€ê°€ í‚¤ì—ë‹ˆ AA TOP W', 
                note: 'ì˜¤ë Œì§€, ì‚¬íƒ•ìˆ˜ìˆ˜, ë°”ë‹ë¼, ì‚´êµ¬, ë°ì€ ì‚°ë¯¸',
                priceDrip: 5500, priceBean: 13000, tags: ['Kenya']
            }
        ];

        // --- êµ­ê°€ë³„ ì •ë³´ (ìƒ‰ìƒ ë° êµ­ê¸° ì´ë¯¸ì§€) ---
        const countryInfo = {
            'Blend': { 
                style: 'bg-stone-600 text-white border-stone-600',
                flagUrl: 'KakaoTalk_20211101_152531287_02.png' // ì—…ë¡œë“œëœ ë¡œê³  ì´ë¯¸ì§€ ê²½ë¡œ
            },
            'Ethiopia': { 
                style: 'bg-rose-100 text-rose-800 border-rose-200',
                flagUrl: 'https://flagcdn.com/w20/et.png'
            },
            'Colombia': { 
                style: 'bg-orange-100 text-orange-800 border-orange-200',
                flagUrl: 'https://flagcdn.com/w20/co.png'
            },
            'Guatemala': { 
                style: 'bg-blue-100 text-blue-800 border-blue-200',
                flagUrl: 'https://flagcdn.com/w20/gt.png'
            },
            'Brazil': { 
                style: 'bg-green-100 text-green-800 border-green-200',
                flagUrl: 'https://flagcdn.com/w20/br.png'
            },
            'Panama': { 
                style: 'bg-indigo-100 text-indigo-800 border-indigo-200',
                flagUrl: 'https://flagcdn.com/w20/pa.png'
            },
            'Kenya': { 
                style: 'bg-red-100 text-red-800 border-red-200',
                flagUrl: 'https://flagcdn.com/w20/ke.png'
            },
            'Costa Rica': { 
                style: 'bg-teal-100 text-teal-800 border-teal-200',
                flagUrl: 'https://flagcdn.com/w20/cr.png'
            },
            'Peru': { 
                style: 'bg-amber-100 text-amber-800 border-amber-200',
                flagUrl: 'https://flagcdn.com/w20/pe.png'
            },
            'Default': { 
                style: 'bg-gray-100 text-gray-800 border-gray-200',
                flagUrl: '' // ê¸°ë³¸ê°’ì€ ì´ë¯¸ì§€ ì—†ìŒ
            }
        };

        const grid = document.getElementById('menu-grid');
        const btns = document.querySelectorAll('.filter-btn');
        let isAdminMode = false;

        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ í’ˆì ˆ ìƒíƒœ ë¶ˆëŸ¬ì˜¤ê¸°
        let soldOutItems = JSON.parse(localStorage.getItem('raontree_soldout_v5')) || [];

        function formatPrice(price) {
            return price.toLocaleString();
        }

        function toggleAdminMode() {
            isAdminMode = !isAdminMode;
            document.body.classList.toggle('admin-mode', isAdminMode);
            
            const btn = document.getElementById('admin-btn');
            const notice = document.getElementById('admin-notice');
            
            // ë²„íŠ¼ ìŠ¤íƒ€ì¼ ë° ì•„ì´ì½˜ ì—…ë°ì´íŠ¸ (innerHTML êµì²´ë¡œ SVG ë³€í™˜ ì˜¤ë¥˜ ë°©ì§€)
            if (isAdminMode) {
                btn.classList.add('bg-stone-800', 'text-white', 'border-transparent');
                btn.classList.remove('text-stone-400');
                btn.innerHTML = `<i data-lucide="unlock" class="w-4 h-4"></i><span class="ml-1 text-xs">ê´€ë¦¬</span>`;
                notice.classList.remove('hidden');
            } else {
                btn.classList.remove('bg-stone-800', 'text-white', 'border-transparent');
                btn.classList.add('text-stone-400');
                btn.innerHTML = `<i data-lucide="lock" class="w-4 h-4"></i><span class="ml-1 text-xs">ê´€ë¦¬</span>`;
                notice.classList.add('hidden');
            }
            
            // ì•„ì´ì½˜ ë‹¤ì‹œ ë Œë”ë§ ë° ë©”ë‰´ ì¬êµ¬ì„±
            lucide.createIcons();
            renderMenu(currentCategory); 
        }

        function toggleSoldOut(id) {
            // ê´€ë¦¬ì ëª¨ë“œì—ì„œë§Œ ë™ì‘
            if (!isAdminMode) return;
            
            if (soldOutItems.includes(id)) {
                soldOutItems = soldOutItems.filter(item => item !== id);
            } else {
                soldOutItems.push(id);
            }
            localStorage.setItem('raontree_soldout_v5', JSON.stringify(soldOutItems));
            renderMenu(currentCategory);
        }

        let currentCategory = 'all';

        function renderMenu(filterCategory) {
            currentCategory = filterCategory;
            grid.innerHTML = '';
            
            // í•„í„° ë²„íŠ¼ ìŠ¤íƒ€ì¼
            btns.forEach(btn => {
                const btnType = btn.getAttribute('onclick').match(/'([^']+)'/)[1];
                if (btnType === filterCategory) {
                    btn.classList.remove('bg-white', 'text-stone-600', 'border');
                    btn.classList.add('bg-stone-800', 'text-white');
                } else {
                    btn.classList.add('bg-white', 'text-stone-600', 'border');
                    btn.classList.remove('bg-stone-800', 'text-white');
                }
            });

            const filteredData = filterCategory === 'all' 
                ? menuData 
                : menuData.filter(item => item.category === filterCategory || (filterCategory === 'daily' && item.category === 'blend'));

            filteredData.forEach(item => {
                const isSoldOut = soldOutItems.includes(item.id);
                const soldOutClass = isSoldOut ? 'sold-out' : '';
                
                // Tags HTML
                let tagsHtml = '';
                if(item.tags) {
                    item.tags.forEach(tag => {
                        let tagClass = 'text-stone-500 bg-stone-100';
                        if(tag === 'Gesha' || tag === 'Premium') tagClass = 'text-amber-700 bg-amber-50 border border-amber-100';
                        if(tag === 'Best' || tag === 'New') tagClass = 'text-red-600 bg-red-50 font-bold';
                        if(tag === 'Decaf') tagClass = 'text-green-700 bg-green-50';
                        
                        tagsHtml += `<span class="text-[10px] px-2 py-0.5 rounded-full ${tagClass} mr-1">${tag}</span>`;
                    });
                }

                // Country Info (Style & Flag)
                const country = countryInfo[item.country] || countryInfo['Default'];
                const flagHtml = country.flagUrl ? `<img src="${country.flagUrl}" alt="${item.country}" class="w-3 h-3 mr-1 inline-block" style="vertical-align: text-top;">` : '';

                // ê´€ë¦¬ì ëª¨ë“œìš© ë²„íŠ¼ HTML ìƒì„± (z-index ë° í´ë¦­ ì´ë²¤íŠ¸)
                const adminBtnHtml = isAdminMode ? `
                    <button onclick="event.stopPropagation(); toggleSoldOut('${item.id}')" 
                        class="absolute top-2 right-2 z-20 px-2 py-1 text-[10px] font-bold rounded shadow-sm border transition-colors cursor-pointer
                        ${isSoldOut 
                            ? 'bg-red-500 text-white border-red-500 hover:bg-red-600' 
                            : 'bg-white text-stone-500 border-stone-200 hover:bg-stone-50 hover:text-stone-800'}">
                        ${isSoldOut ? 'í’ˆì ˆ í•´ì œ' : 'í’ˆì ˆ ì²˜ë¦¬'}
                    </button>
                ` : '';

                const card = document.createElement('div');
                // ê´€ë¦¬ì ëª¨ë“œì¼ ë•ŒëŠ” ì¹´ë“œ ì „ì²´ í´ë¦­ ì´ë²¤íŠ¸ ì œê±° (ë²„íŠ¼ìœ¼ë¡œë§Œ ë™ì‘)
                const cursorClass = isAdminMode ? '' : '';
                
                card.className = `relative bg-white rounded-xl p-5 shadow-sm border border-stone-100 transition-all ${soldOutClass} ${cursorClass}`;
                
                card.innerHTML = `
                    ${adminBtnHtml}
                    <div class="flex flex-col h-full justify-between">
                        <div>
                            <div class="flex items-center mb-2">
                                <span class="flex items-center text-[10px] font-bold px-2 py-0.5 rounded mr-2 border ${country.style}">
                                    ${flagHtml}
                                    ${item.country}
                                </span>
                            </div>
                            <div class="flex justify-between items-start mb-1">
                                <h3 class="font-bold text-stone-800 text-lg leading-snug break-keep pr-2">${item.name}</h3>
                                ${!isAdminMode && isSoldOut ? '<span class="text-xs font-bold text-red-500 border border-red-500 px-1 rounded whitespace-nowrap">í’ˆì ˆë¨</span>' : ''}
                            </div>
                            <p class="text-xs text-stone-500 mb-3 leading-relaxed">${item.note}</p>
                            <div class="flex flex-wrap mb-4">
                                ${tagsHtml}
                            </div>
                        </div>
                        
                        <div class="flex justify-between items-end border-t border-stone-100 pt-3 mt-1">
                            <div class="text-center w-1/2 border-r border-stone-100 pr-2">
                                <span class="block text-[10px] text-stone-400 mb-0.5">í•¸ë“œë“œë¦½</span>
                                <span class="block font-bold text-stone-700 text-lg">${formatPrice(item.priceDrip)}</span>
                            </div>
                            <div class="text-center w-1/2 pl-2">
                                <span class="block text-[10px] text-stone-400 mb-0.5">ì›ë‘ (100g)</span>
                                <span class="block font-bold text-stone-600 text-base">${formatPrice(item.priceBean)}</span>
                            </div>
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });
            
            if(window.lucide) lucide.createIcons();
        }

        // ì´ˆê¸° ì‹¤í–‰
        renderMenu('all');
        lucide.createIcons();
        
        // ì „ì—­ ë…¸ì¶œ
        window.filterMenu = renderMenu;
        window.toggleAdminMode = toggleAdminMode;
        window.toggleSoldOut = toggleSoldOut;
    </script>
</body>
</html>
